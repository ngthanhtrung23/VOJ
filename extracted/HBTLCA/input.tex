Gồm nhiều bộ test:  

   Dòng 1: Số nguyên N, số đỉnh của cây (1≤N≤$10^{5}$   ).  

   N-1 dòng tiếp theo: Mỗi dòng gồm hai số nguyên u và v là hai đỉnh của đồ thị.  

   Dòng tiếp theo: Số nguyên M, số truy vấn (1≤M≤$10^{5}$   ).  

   M dòng tiếp theo, mỗi dòng thuộc một trong hai loại truy vấn đã cho: "! root" ứng với truy vấn loại 1 và "? u v" ứng với truy vấn loại 2.  

   Kết thúc bộ test là số 0.